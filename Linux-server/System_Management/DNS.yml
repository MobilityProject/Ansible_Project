---
  # DNS 관련 설정 파일인 Named.conf 파일 존재 여부 확인 - 검사
  - name: Return true If named.conf isExists
    stat:
      path: /etc/named.conf
    register: named_state
    ignore_errors: yes

  # DNS Zone에 만약 allow-transfer에 any가 있을 경우 any를 삭제 - 조치
  - name: DNS Zone Transfer
    lineinfile:
      path: /etc/named.conf
      regexp: 'allow-transfer\s*{\s*.*?\bany;\s*}'
      line: 'allow-transfer{ }'
    when: named_state.stat.exists
    ignore_errors: yes


